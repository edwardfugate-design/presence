<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Presence Yoga - AI Sequencing Studio</title>
    <script src="presence-content-manager.js"></script>
    <script src="presence-monitoring.js"></script>
    <script src="presence-auto-integrate.js"></script>
    <script src="yoga-library-with-variations.js"></script>
    <script src="pose-database.js"></script>
  
  <!-- React & ReactDOM -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  
  <!-- Babel for JSX -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600&display=swap" rel="stylesheet">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
      overflow-x: hidden;
      transition: background-color 0.4s ease, color 0.4s ease;
    }
    
    .font-serif {
      font-family: 'Cormorant Garamond', serif;
    }

    .dark-mode {
      background-color: #0f1110;
      color: #e5e7eb;
    }

    .light-mode {
      background-color: #fcfaf7;
      color: #1f2937;
    }
    
    .custom-scrollbar::-webkit-scrollbar {
      width: 6px;
    }
    
    .custom-scrollbar::-webkit-scrollbar-track {
      background: rgba(120, 113, 108, 0.1);
      border-radius: 3px;
    }
    
    .custom-scrollbar::-webkit-scrollbar-thumb {
      background: rgba(120, 113, 108, 0.3);
      border-radius: 3px;
    }
    
    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
      background: rgba(120, 113, 108, 0.5);
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    .animate-pulse {
      animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }

    @keyframes shimmer {
      0% { background-position: -1000px 0; }
      100% { background-position: 1000px 0; }
    }
    
    .animate-shimmer {
      animation: shimmer 2s infinite linear;
      background: linear-gradient(to right, transparent 0%, rgba(16, 185, 129, 0.2) 50%, transparent 100%);
      background-size: 1000px 100%;
    }
  </style>
</head>
<body class="light-mode">
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useMemo } = React;
    
    // ============================================================================
    // ICON COMPONENTS
    // ============================================================================
    
    const ChevronDown = ({ size = 24, className = '' }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <polyline points="6 9 12 15 18 9"></polyline>
      </svg>
    );
    
    const Plus = ({ size = 24, className = '' }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <line x1="12" y1="5" x2="12" y2="19"></line>
        <line x1="5" y1="12" x2="19" y2="12"></line>
      </svg>
    );
    
    const X = ({ size = 24, className = '' }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    );
    
    const Search = ({ size = 24, className = '' }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <circle cx="11" cy="11" r="8"></circle>
        <path d="m21 21-4.35-4.35"></path>
      </svg>
    );
    
    const Sparkles = ({ size = 24, className = '' }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"></path>
        <path d="M5 3v4"></path>
        <path d="M19 17v4"></path>
        <path d="M3 5h4"></path>
        <path d="M17 19h4"></path>
      </svg>
    );
    
    const Wand2 = ({ size = 24, className = '' }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <path d="m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z"></path>
        <path d="m14 7 3 3"></path>
        <path d="M5 6v4"></path>
        <path d="M19 14v4"></path>
        <path d="M10 2v2"></path>
        <path d="M7 8H3"></path>
        <path d="M21 16h-4"></path>
        <path d="M11 3H9"></path>
      </svg>
    );
    
    const Download = ({ size = 24, className = '' }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
        <polyline points="7 10 12 15 17 10"></polyline>
        <line x1="12" y1="15" x2="12" y2="3"></line>
      </svg>
    );

    const Moon = ({ size = 24, className = '' }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
      </svg>
    );

    const Sun = ({ size = 24, className = '' }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <circle cx="12" cy="12" r="5"/>
        <line x1="12" y1="1" x2="12" y2="3"/>
        <line x1="12" y1="21" x2="12" y2="23"/>
        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
        <line x1="1" y1="12" x2="3" y2="12"/>
        <line x1="21" y1="12" x2="23" y2="12"/>
        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
      </svg>
    );

    // ============================================================================
    // COMPREHENSIVE POSE DATABASE
    // ============================================================================

    const POSE_LIBRARY = {
      // STANDING POSES
      mountain: { id: 'mountain', name: 'Mountain Pose', sanskrit: 'Tadasana', family: 'Standing', intensity: 1, duration: 30 },
      tree: { id: 'tree', name: 'Tree Pose', sanskrit: 'Vrksasana', family: 'Standing', intensity: 4, duration: 60 },
      eagle: { id: 'eagle', name: 'Eagle Pose', sanskrit: 'Garudasana', family: 'Standing', intensity: 6, duration: 45 },
      warrior_i: { id: 'warrior_i', name: 'Warrior I', sanskrit: 'Virabhadrasana I', family: 'Standing', intensity: 5, duration: 45 },
      warrior_ii: { id: 'warrior_ii', name: 'Warrior II', sanskrit: 'Virabhadrasana II', family: 'Standing', intensity: 5, duration: 45 },
      warrior_iii: { id: 'warrior_iii', name: 'Warrior III', sanskrit: 'Virabhadrasana III', family: 'Standing', intensity: 7, duration: 30 },
      triangle: { id: 'triangle', name: 'Triangle Pose', sanskrit: 'Trikonasana', family: 'Standing', intensity: 4, duration: 45 },
      extended_triangle: { id: 'extended_triangle', name: 'Extended Triangle', sanskrit: 'Utthita Trikonasana', family: 'Standing', intensity: 5, duration: 45 },
      extended_side_angle: { id: 'extended_side_angle', name: 'Extended Side Angle', sanskrit: 'Utthita Parsvakonasana', family: 'Standing', intensity: 6, duration: 45 },
      half_moon: { id: 'half_moon', name: 'Half Moon Pose', sanskrit: 'Ardha Chandrasana', family: 'Standing', intensity: 7, duration: 30 },
      
      // FORWARD FOLDS
      standing_forward_fold: { id: 'standing_forward_fold', name: 'Standing Forward Fold', sanskrit: 'Uttanasana', family: 'Forward Fold', intensity: 3, duration: 60 },
      wide_leg_forward_fold: { id: 'wide_leg_forward_fold', name: 'Wide-Legged Forward Fold', sanskrit: 'Prasarita Padottanasana', family: 'Forward Fold', intensity: 4, duration: 60 },
      seated_forward_fold: { id: 'seated_forward_fold', name: 'Seated Forward Fold', sanskrit: 'Paschimottanasana', family: 'Forward Fold', intensity: 4, duration: 90 },
      head_to_knee: { id: 'head_to_knee', name: 'Head-to-Knee Forward Fold', sanskrit: 'Janu Sirsasana', family: 'Forward Fold', intensity: 5, duration: 60 },
      
      // BACKBENDS
      cobra: { id: 'cobra', name: 'Cobra Pose', sanskrit: 'Bhujangasana', family: 'Backbend', intensity: 4, duration: 30 },
      upward_dog: { id: 'upward_dog', name: 'Upward-Facing Dog', sanskrit: 'Urdhva Mukha Svanasana', family: 'Backbend', intensity: 5, duration: 30 },
      bow: { id: 'bow', name: 'Bow Pose', sanskrit: 'Dhanurasana', family: 'Backbend', intensity: 7, duration: 30 },
      camel: { id: 'camel', name: 'Camel Pose', sanskrit: 'Ustrasana', family: 'Backbend', intensity: 7, duration: 45 },
      wheel: { id: 'wheel', name: 'Wheel Pose', sanskrit: 'Urdhva Dhanurasana', family: 'Backbend', intensity: 9, duration: 30 },
      bridge: { id: 'bridge', name: 'Bridge Pose', sanskrit: 'Setu Bandha Sarvangasana', family: 'Backbend', intensity: 5, duration: 60 },
      
      // TWISTS
      seated_twist: { id: 'seated_twist', name: 'Seated Spinal Twist', sanskrit: 'Ardha Matsyendrasana', family: 'Twist', intensity: 5, duration: 60 },
      revolved_triangle: { id: 'revolved_triangle', name: 'Revolved Triangle', sanskrit: 'Parivrtta Trikonasana', family: 'Twist', intensity: 7, duration: 45 },
      revolved_side_angle: { id: 'revolved_side_angle', name: 'Revolved Side Angle', sanskrit: 'Parivrtta Parsvakonasana', family: 'Twist', intensity: 7, duration: 45 },
      supine_twist: { id: 'supine_twist', name: 'Supine Spinal Twist', sanskrit: 'Supta Matsyendrasana', family: 'Twist', intensity: 3, duration: 90 },
      
      // HIP OPENERS
      pigeon: { id: 'pigeon', name: 'Pigeon Pose', sanskrit: 'Eka Pada Rajakapotasana', family: 'Hip Opener', intensity: 6, duration: 120 },
      lizard: { id: 'lizard', name: 'Lizard Pose', sanskrit: 'Utthan Pristhasana', family: 'Hip Opener', intensity: 6, duration: 60 },
      fire_log: { id: 'fire_log', name: 'Fire Log Pose', sanskrit: 'Agnistambhasana', family: 'Hip Opener', intensity: 7, duration: 90 },
      cow_face: { id: 'cow_face', name: 'Cow Face Pose', sanskrit: 'Gomukhasana', family: 'Hip Opener', intensity: 6, duration: 60 },
      bound_angle: { id: 'bound_angle', name: 'Bound Angle Pose', sanskrit: 'Baddha Konasana', family: 'Hip Opener', intensity: 4, duration: 120 },
      
      // CORE
      boat: { id: 'boat', name: 'Boat Pose', sanskrit: 'Navasana', family: 'Core', intensity: 7, duration: 30 },
      plank: { id: 'plank', name: 'Plank Pose', sanskrit: 'Phalakasana', family: 'Core', intensity: 5, duration: 60 },
      side_plank: { id: 'side_plank', name: 'Side Plank', sanskrit: 'Vasisthasana', family: 'Core', intensity: 7, duration: 30 },
      
      // INVERSIONS
      downward_dog: { id: 'downward_dog', name: 'Downward-Facing Dog', sanskrit: 'Adho Mukha Svanasana', family: 'Inversion', intensity: 4, duration: 60 },
      headstand: { id: 'headstand', name: 'Headstand', sanskrit: 'Sirsasana', family: 'Inversion', intensity: 9, duration: 60 },
      shoulder_stand: { id: 'shoulder_stand', name: 'Shoulder Stand', sanskrit: 'Sarvangasana', family: 'Inversion', intensity: 8, duration: 90 },
      legs_up_wall: { id: 'legs_up_wall', name: 'Legs-Up-the-Wall', sanskrit: 'Viparita Karani', family: 'Inversion', intensity: 2, duration: 300 },
      
      // RESTORATIVE
      childs_pose: { id: 'childs_pose', name: "Child's Pose", sanskrit: 'Balasana', family: 'Restorative', intensity: 1, duration: 120 },
      corpse: { id: 'corpse', name: 'Corpse Pose', sanskrit: 'Savasana', family: 'Restorative', intensity: 0, duration: 300 },
      reclined_butterfly: { id: 'reclined_butterfly', name: 'Reclined Butterfly', sanskrit: 'Supta Baddha Konasana', family: 'Restorative', intensity: 2, duration: 180 },
      happy_baby: { id: 'happy_baby', name: 'Happy Baby', sanskrit: 'Ananda Balasana', family: 'Restorative', intensity: 2, duration: 60 },
    };

    // Yoga Styles Data
    const YOGA_STYLES = {
      'All Categories': {
        Traditional: ['Hatha', 'Ashtanga', 'Iyengar', 'Kundalini', 'Sivananda'],
        Flow: ['Vinyasa Flow', 'Power Yoga', 'Rocket Yoga', 'Jivamukti', 'Baptiste Power'],
        Gentle: ['Yin Yoga', 'Restorative', 'Gentle Yoga', 'Chair Yoga', 'Therapeutic', 'Somatic Yoga'],
        Hot: ['Bikram', 'Hot Vinyasa', 'Hot Power', 'Inferno Hot Pilates'],
        Specialty: ['Prenatal', 'Postnatal', 'Kids Yoga', 'Senior Yoga', 'Adaptive Yoga', 'Trauma-Informed'],
        Blended: ['Yin Yang', 'Vinyasa Yin'],
        Breath: ['Pranayama'],
        Fusion: ['Acro Yoga', 'Aerial Yoga', 'Yoga Barre', 'Yoga Sculpt', 'SUP Yoga']
      }
    };

    // ============================================================================
    // MAIN APP COMPONENT
    // ============================================================================

    function PresenceYoga() {
      const [theme, setTheme] = useState('light');
      const [selectedCategory, setSelectedCategory] = useState('All Categories');
      const [selectedStyle, setSelectedStyle] = useState('Hatha');
      const [selectedLevel, setSelectedLevel] = useState('Beginner');
      const [duration, setDuration] = useState(60);
      const [searchTerm, setSearchTerm] = useState('');
      const [isGenerating, setIsGenerating] = useState(false);
      const [viewMode, setViewMode] = useState('structural');
      
      const [sequence, setSequence] = useState({
        warmup: [],
        standing: [],
        peak: [],
        cooldown: [],
        savasana: ['corpse']
      });

      // Sync theme to body class
      useEffect(() => {
        document.body.className = theme === 'dark' ? 'dark-mode font-serif' : 'light-mode font-serif';
      }, [theme]);

      const toggleTheme = () => setTheme(prev => prev === 'light' ? 'dark' : 'light');

      const sectionNames = {
        warmup: 'Warm-Up & Grounding',
        standing: 'Standing & Flow',
        peak: 'Peak Postures',
        cooldown: 'Cool Down & Release',
        savasana: 'Savasana & Integration'
      };

      // Filter poses based on search
      const filteredPoses = useMemo(() => {
        return Object.values(POSE_LIBRARY).filter(pose =>
          pose.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
          pose.sanskrit.toLowerCase().includes(searchTerm.toLowerCase()) ||
          pose.family.toLowerCase().includes(searchTerm.toLowerCase())
        );
      }, [searchTerm]);

      // Generate AI sequence
      const generateSequence = async () => {
        setIsGenerating(true);
        
        // Simulate AI generation
        await new Promise(resolve => setTimeout(resolve, 2000));
        
        // Create a balanced sequence based on level
        const newSequence = {
          warmup: ['childs_pose', 'downward_dog', 'mountain'],
          standing: selectedLevel === 'Beginner' 
            ? ['warrior_i', 'warrior_ii', 'triangle']
            : selectedLevel === 'Intermediate'
            ? ['warrior_i', 'warrior_ii', 'warrior_iii', 'triangle', 'half_moon']
            : ['warrior_i', 'warrior_ii', 'warrior_iii', 'extended_side_angle', 'revolved_triangle', 'half_moon'],
          peak: selectedLevel === 'Beginner'
            ? ['bridge', 'cobra']
            : selectedLevel === 'Intermediate'
            ? ['bridge', 'camel', 'bow']
            : ['wheel', 'bow', 'headstand'],
          cooldown: ['seated_forward_fold', 'pigeon', 'supine_twist'],
          savasana: ['corpse']
        };
        
        setSequence(newSequence);
        setIsGenerating(false);
      };

      const addPoseToSection = (poseId, section) => {
        setSequence(prev => ({
          ...prev,
          [section]: [...prev[section], poseId]
        }));
      };

      const removePoseFromSection = (poseId, section, index) => {
        setSequence(prev => ({
          ...prev,
          [section]: prev[section].filter((_, idx) => idx !== index)
        }));
      };

      const totalDuration = useMemo(() => {
        let total = 0;
        Object.values(sequence).forEach(section => {
          section.forEach(poseId => {
            const pose = POSE_LIBRARY[poseId];
            if (pose) total += pose.duration;
          });
        });
        return Math.round(total / 60);
      }, [sequence]);

      return (
        <div className="min-h-screen">
          {/* Header */}
          <header className={`border-b px-8 py-6 sticky top-0 z-50 transition-colors ${
            theme === 'dark' 
              ? 'bg-[#161817] border-white/10' 
              : 'bg-white border-gray-100'
          }`}>
            <div className="flex items-center justify-between">
              <div className="flex items-center gap-4">
                <div className={`w-10 h-10 rounded-full flex items-center justify-center font-bold ${
                  theme === 'dark' ? 'bg-emerald-500 text-black' : 'bg-emerald-950 text-white'
                }`}>P</div>
                <div>
                  <h1 className="text-3xl font-light font-serif tracking-tight">Presence Yoga</h1>
                  <p className={`text-sm mt-1 ${theme === 'dark' ? 'text-stone-500' : 'text-gray-600'}`}>
                    AI-Powered Sequence Studio
                  </p>
                </div>
              </div>
              
              <div className="flex items-center gap-6">
                <button 
                  onClick={toggleTheme}
                  className={`p-2 rounded-full transition-colors ${
                    theme === 'dark' 
                      ? 'bg-white/5 text-yellow-400 hover:bg-white/10' 
                      : 'bg-gray-100 text-gray-500 hover:bg-gray-200'
                  }`}
                >
                  {theme === 'light' ? <Moon size={20} /> : <Sun size={20} />}
                </button>
                <div className="text-right">
                  <div className={`text-sm ${theme === 'dark' ? 'text-stone-400' : 'text-gray-600'}`}>
                    Total Duration
                  </div>
                  <div className={`text-2xl font-light ${theme === 'dark' ? 'text-stone-200' : 'text-gray-900'}`}>
                    {totalDuration} min
                  </div>
                </div>
              </div>
            </div>
          </header>

          <div className="grid grid-cols-12 h-[calc(100vh-97px)]">
            {/* Left Sidebar - AI Sequencing */}
            <aside className={`col-span-3 border-r p-6 overflow-y-auto custom-scrollbar transition-colors ${
              theme === 'dark' 
                ? 'bg-[#0f1110] border-white/5' 
                : 'bg-white border-gray-100'
            }`}>
              <div className="mb-6">
                <h2 className={`text-xs uppercase tracking-widest mb-4 ${
                  theme === 'dark' ? 'text-stone-500' : 'text-gray-500'
                }`}>AI Sequencing</h2>
                
                {/* Category Dropdown */}
                <div className="mb-4">
                  <label className={`block text-xs mb-2 ${
                    theme === 'dark' ? 'text-stone-500' : 'text-gray-600'
                  }`}>Category</label>
                  <select 
                    value={selectedCategory}
                    onChange={(e) => setSelectedCategory(e.target.value)}
                    className={`w-full border rounded-lg px-4 py-2.5 text-sm focus:outline-none transition-colors ${
                      theme === 'dark'
                        ? 'bg-stone-900/60 border-stone-800/50 text-stone-200 focus:border-stone-700'
                        : 'bg-gray-50 border-gray-200 text-gray-900 focus:border-gray-300'
                    }`}
                  >
                    <option>All Categories</option>
                    <option>Traditional</option>
                    <option>Flow</option>
                    <option>Gentle</option>
                    <option>Hot</option>
                    <option>Specialty</option>
                    <option>Blended</option>
                    <option>Breath</option>
                    <option>Fusion</option>
                  </select>
                </div>

                {/* Style Dropdown */}
                <div className="mb-4">
                  <label className={`block text-xs mb-2 ${
                    theme === 'dark' ? 'text-stone-500' : 'text-gray-600'
                  }`}>Style</label>
                  <select 
                    value={selectedStyle}
                    onChange={(e) => setSelectedStyle(e.target.value)}
                    className={`w-full border rounded-lg px-4 py-2.5 text-sm focus:outline-none transition-colors ${
                      theme === 'dark'
                        ? 'bg-stone-900/60 border-stone-800/50 text-stone-200 focus:border-stone-700'
                        : 'bg-gray-50 border-gray-200 text-gray-900 focus:border-gray-300'
                    }`}
                  >
                    {Object.values(YOGA_STYLES['All Categories']).flat().map(style => (
                      <option key={style}>{style}</option>
                    ))}
                  </select>
                  <p className={`text-xs mt-2 italic ${
                    theme === 'dark' ? 'text-stone-600' : 'text-gray-500'
                  }`}>
                    {selectedStyle === 'Hatha' && 'Classical yoga emphasizing alignment and breath'}
                    {selectedStyle === 'Vinyasa Flow' && 'Dynamic flowing sequences synchronized with breath'}
                    {selectedStyle === 'Yin Yoga' && 'Deep, meditative holds targeting connective tissue'}
                  </p>
                </div>

                {/* Level */}
                <div className="mb-4">
                  <label className={`block text-xs mb-2 ${
                    theme === 'dark' ? 'text-stone-500' : 'text-gray-600'
                  }`}>Level</label>
                  <div className="flex gap-2">
                    {['Beginner', 'Intermediate', 'Advanced'].map(level => (
                      <button
                        key={level}
                        onClick={() => setSelectedLevel(level)}
                        className={`flex-1 px-3 py-2 text-xs rounded-lg transition-all ${
                          selectedLevel === level
                            ? theme === 'dark'
                              ? 'bg-stone-800 text-stone-100'
                              : 'bg-gray-200 text-gray-900'
                            : theme === 'dark'
                              ? 'bg-stone-900/40 text-stone-500 hover:text-stone-300'
                              : 'bg-gray-50 text-gray-500 hover:text-gray-700'
                        }`}
                      >
                        {level}
                      </button>
                    ))}
                  </div>
                </div>

                {/* Duration */}
                <div className="mb-6">
                  <label className={`block text-xs mb-2 ${
                    theme === 'dark' ? 'text-stone-500' : 'text-gray-600'
                  }`}>Minutes</label>
                  <input
                    type="range"
                    min="15"
                    max="120"
                    step="15"
                    value={duration}
                    onChange={(e) => setDuration(parseInt(e.target.value))}
                    className="w-full"
                  />
                  <div className={`flex justify-between text-xs mt-1 ${
                    theme === 'dark' ? 'text-stone-600' : 'text-gray-500'
                  }`}>
                    <span>15</span>
                    <span className={theme === 'dark' ? 'text-stone-300 font-medium' : 'text-gray-700 font-medium'}>
                      {duration} min
                    </span>
                    <span>120</span>
                  </div>
                </div>

                {/* Generate Button */}
                <button
                  onClick={generateSequence}
                  disabled={isGenerating}
                  className={`w-full px-6 py-3.5 rounded-lg font-medium transition-all flex items-center justify-center gap-2 shadow-lg disabled:cursor-not-allowed ${
                    theme === 'dark'
                      ? 'bg-emerald-500 text-black hover:bg-emerald-400 disabled:bg-stone-800 disabled:text-stone-600'
                      : 'bg-emerald-950 text-white hover:bg-black disabled:bg-gray-200 disabled:text-gray-400'
                  }`}
                >
                  {isGenerating ? (
                    <>
                      <div className="animate-spin rounded-full h-4 w-4 border-2 border-current border-t-transparent"></div>
                      <span>Generating...</span>
                    </>
                  ) : (
                    <>
                      <Sparkles size={18} />
                      <span>Generate Sequence</span>
                    </>
                  )}
                </button>
              </div>

              {/* Pose Library */}
              <div className="mt-8">
                <h3 className={`text-xs uppercase tracking-widest mb-4 ${
                  theme === 'dark' ? 'text-stone-500' : 'text-gray-500'
                }`}>Pose Library</h3>
                
                <div className="relative mb-4">
                  <Search size={16} className={`absolute left-3 top-1/2 -translate-y-1/2 ${
                    theme === 'dark' ? 'text-stone-600' : 'text-gray-400'
                  }`} />
                  <input
                    type="text"
                    placeholder="Search poses..."
                    value={searchTerm}
                    onChange={(e) => setSearchTerm(e.target.value)}
                    className={`w-full border rounded-lg pl-10 pr-4 py-2 text-sm focus:outline-none transition-colors ${
                      theme === 'dark'
                        ? 'bg-stone-900/60 border-stone-800/50 text-stone-200 placeholder-stone-600 focus:border-stone-700'
                        : 'bg-gray-50 border-gray-200 text-gray-900 placeholder-gray-400 focus:border-gray-300'
                    }`}
                  />
                </div>

                <div className="space-y-2 max-h-[400px] overflow-y-auto custom-scrollbar">
                  {filteredPoses.map(pose => (
                    <div
                      key={pose.id}
                      className={`group p-3 rounded-lg border transition-all cursor-pointer ${
                        theme === 'dark'
                          ? 'bg-stone-900/40 hover:bg-stone-900/60 border-stone-800/30 hover:border-stone-700/50'
                          : 'bg-gray-50 hover:bg-gray-100 border-gray-200 hover:border-gray-300'
                      }`}
                      onClick={() => addPoseToSection(pose.id, 'standing')}
                    >
                      <div className={`text-sm font-medium transition-colors ${
                        theme === 'dark'
                          ? 'text-stone-300 group-hover:text-stone-100'
                          : 'text-gray-700 group-hover:text-gray-900'
                      }`}>
                        {pose.name}
                      </div>
                      <div className={`text-xs mt-1 ${
                        theme === 'dark' ? 'text-stone-600' : 'text-gray-500'
                      }`}>{pose.sanskrit}</div>
                      <div className="flex items-center gap-2 mt-2 flex-wrap">
                        <span className={`text-xs px-2 py-0.5 rounded-full ${
                          theme === 'dark'
                            ? 'bg-stone-800/50 text-stone-500'
                            : 'bg-gray-200 text-gray-600'
                        }`}>
                          {pose.family}
                        </span>
                        <span className={`text-xs ${
                          theme === 'dark' ? 'text-stone-600' : 'text-gray-500'
                        }`}>
                          Level {pose.intensity}
                        </span>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            </aside>
            
            {/* Center - Sequence Canvas */}
            <main className={`col-span-6 p-8 overflow-y-auto custom-scrollbar transition-colors ${
              theme === 'dark' ? 'bg-[#0a0c0b]' : 'bg-[#fcfaf7]'
            }`}>
              <div className={`flex items-center justify-between mb-8 pb-4 border-b transition-colors ${
                theme === 'dark' ? 'border-stone-800/30' : 'border-gray-200'
              }`}>
                <h2 className={`text-2xl font-light ${
                  theme === 'dark' ? 'text-stone-100' : 'text-gray-900'
                }`}>Sequence Flow</h2>
                
                <div className="flex gap-2">
                  <button
                    onClick={() => setViewMode('structural')}
                    className={`px-5 py-2.5 text-sm rounded-lg transition-all ${
                      viewMode === 'structural'
                        ? theme === 'dark'
                          ? 'bg-stone-800 text-stone-100'
                          : 'bg-gray-200 text-gray-900'
                        : theme === 'dark'
                          ? 'text-stone-500 hover:text-stone-300 hover:bg-stone-900/30'
                          : 'text-gray-500 hover:text-gray-700 hover:bg-gray-100'
                    }`}
                  >
                    Structural
                  </button>
                  <button
                    onClick={() => setViewMode('teaching')}
                    className={`px-5 py-2.5 text-sm rounded-lg transition-all ${
                      viewMode === 'teaching'
                        ? theme === 'dark'
                          ? 'bg-stone-800 text-stone-100'
                          : 'bg-gray-200 text-gray-900'
                        : theme === 'dark'
                          ? 'text-stone-500 hover:text-stone-300 hover:bg-stone-900/30'
                          : 'text-gray-500 hover:text-gray-700 hover:bg-gray-100'
                    }`}
                  >
                    Teaching Script
                  </button>
                </div>
              </div>
              
              {isGenerating && (
                <div className="text-center py-20">
                  <div className="inline-block animate-shimmer mb-4">
                    <Wand2 size={48} className={theme === 'dark' ? 'text-emerald-400' : 'text-emerald-600'} />
                  </div>
                  <p className={`text-lg font-light ${
                    theme === 'dark' ? 'text-stone-400' : 'text-gray-600'
                  }`}>Crafting your perfect sequence...</p>
                </div>
              )}

              {!isGenerating && viewMode === 'structural' && (
                <div className="space-y-8">
                  {Object.entries(sequence).map(([section, poses]) => (
                    <div key={section} className="space-y-3">
                      <h3 className={`text-xl font-light flex items-center gap-2 font-serif ${
                        theme === 'dark' ? 'text-stone-100' : 'text-gray-900'
                      }`}>
                        <ChevronDown size={20} className={theme === 'dark' ? 'text-stone-600' : 'text-gray-400'} />
                        {sectionNames[section]}
                      </h3>
                      
                      <div className="ml-7 space-y-2">
                        {poses.map((poseId, idx) => {
                          const pose = POSE_LIBRARY[poseId];
                          if (!pose) return null;
                          
                          return (
                            <div
                              key={`${poseId}-${idx}`}
                              className={`group flex items-center justify-between p-4 rounded-xl border transition-all duration-200 ${
                                theme === 'dark'
                                  ? 'bg-gradient-to-r from-stone-900/40 to-stone-900/20 hover:from-stone-900/60 hover:to-stone-900/40 border-stone-800/30 hover:border-stone-700/50'
                                  : 'bg-white hover:bg-gray-50 border-gray-200 hover:border-gray-300'
                              }`}
                            >
                              <div className="flex-1">
                                <div className={`font-medium ${
                                  theme === 'dark' ? 'text-stone-200' : 'text-gray-900'
                                }`}>{pose.name}</div>
                                <div className={`text-xs mt-1 ${
                                  theme === 'dark' ? 'text-stone-600' : 'text-gray-500'
                                }`}>{pose.sanskrit}</div>
                              </div>
                              
                              <div className="flex items-center gap-3">
                                <span className={`text-xs px-2.5 py-1 rounded-full ${
                                  theme === 'dark'
                                    ? 'bg-stone-800/50 text-stone-500'
                                    : 'bg-gray-200 text-gray-600'
                                }`}>
                                  {Math.round(pose.duration / 60)}m
                                </span>
                                <button 
                                  onClick={() => removePoseFromSection(poseId, section, idx)}
                                  className={`opacity-0 group-hover:opacity-100 transition-opacity hover:text-red-400 ${
                                    theme === 'dark' ? 'text-stone-600' : 'text-gray-400'
                                  }`}
                                >
                                  <X size={18} />
                                </button>
                              </div>
                            </div>
                          );
                        })}
                        
                        {section !== 'savasana' && (
                          <button
                            className={`w-full p-4 rounded-xl border-2 border-dashed transition-all flex items-center justify-center gap-2 ${
                              theme === 'dark'
                                ? 'border-stone-800/50 hover:border-stone-700/50 hover:bg-stone-900/20 text-stone-600 hover:text-stone-400'
                                : 'border-gray-300 hover:border-gray-400 hover:bg-gray-50 text-gray-500 hover:text-gray-700'
                            }`}
                          >
                            <Plus size={18} />
                            <span className="text-sm tracking-wide">Add Pose</span>
                          </button>
                        )}
                      </div>
                    </div>
                  ))}
                </div>
              )}

              {!isGenerating && viewMode === 'teaching' && (
                <div className="space-y-8 max-w-3xl">
                  <p className={`text-sm italic border-l-2 pl-4 mb-8 ${
                    theme === 'dark'
                      ? 'text-stone-500 border-stone-800'
                      : 'text-gray-600 border-gray-300'
                  }`}>
                    Teaching script for {selectedStyle} • {selectedLevel} • {duration} minutes
                  </p>
                  
                  {Object.entries(sequence).map(([section, poses]) => (
                    <div key={section} className="space-y-6">
                      <h3 className={`text-2xl font-light font-serif border-b pb-2 ${
                        theme === 'dark'
                          ? 'text-stone-100 border-stone-800/30'
                          : 'text-gray-900 border-gray-200'
                      }`}>
                        {sectionNames[section]}
                      </h3>
                      
                      {poses.map((poseId, idx) => {
                        const pose = POSE_LIBRARY[poseId];
                        if (!pose) return null;
                        
                        return (
                          <div key={idx} className="space-y-2 pl-4">
                            <p className={`text-lg leading-relaxed font-light ${
                              theme === 'dark' ? 'text-stone-300' : 'text-gray-700'
                            }`}>
                              Move into <span className="font-serif italic">{pose.name}</span>. 
                              {pose.intensity > 6 && " This is your peak. Find your edge with compassion."}
                              {pose.intensity <= 3 && " Allow the body to soften and release."}
                              {pose.intensity > 3 && pose.intensity <= 6 && " Hold steady, breathe deeply."}
                            </p>
                            <p className={`text-xs ${
                              theme === 'dark' ? 'text-stone-700' : 'text-gray-500'
                            }`}>
                              [Hold for {Math.round(pose.duration / 60)} minute{pose.duration >= 120 ? 's' : ''}]
                            </p>
                          </div>
                        );
                      })}
                    </div>
                  ))}
                </div>
              )}
            </main>
            
            {/* Right - Intelligence & Tools */}
            <aside className={`col-span-3 border-l p-6 overflow-y-auto custom-scrollbar transition-colors ${
              theme === 'dark'
                ? 'bg-[#0f1110] border-white/5'
                : 'bg-white border-gray-100'
            }`}>
              <h2 className={`text-xs uppercase tracking-widest mb-6 ${
                theme === 'dark' ? 'text-stone-500' : 'text-gray-500'
              }`}>
                Sequence Intelligence
              </h2>
              
              <div className={`p-5 rounded-xl border mb-6 transition-colors ${
                theme === 'dark'
                  ? 'bg-gradient-to-br from-stone-900/40 to-stone-900/20 border-stone-800/30'
                  : 'bg-emerald-50 border-emerald-100'
              }`}>
                <p className={`text-sm leading-relaxed italic ${
                  theme === 'dark' ? 'text-stone-400' : 'text-gray-700'
                }`}>
                  "The sequence flows without resistance. Energy ascends mindfully, peaks with presence, and settles with grace."
                </p>
              </div>
              
              <div className="space-y-4 mb-8">
                <button className={`w-full flex items-center justify-center gap-2 px-4 py-3 border rounded-lg text-sm transition-all ${
                  theme === 'dark'
                    ? 'bg-stone-900/40 hover:bg-stone-900/60 border-stone-800/50 text-stone-300 hover:text-stone-100'
                    : 'bg-gray-50 hover:bg-gray-100 border-gray-200 text-gray-700 hover:text-gray-900'
                }`}>
                  <Download size={16} />
                  Export Sequence
                </button>
              </div>
              
              <div className={`p-4 rounded-xl border ${
                theme === 'dark'
                  ? 'bg-indigo-950/20 border-indigo-900/30'
                  : 'bg-indigo-50 border-indigo-200'
              }`}>
                <p className={`text-xs mb-2 uppercase tracking-wider ${
                  theme === 'dark' ? 'text-indigo-300/70' : 'text-indigo-700'
                }`}>Sequence Stats</p>
                <div className={`space-y-2 text-xs ${
                  theme === 'dark' ? 'text-indigo-200/60' : 'text-indigo-600'
                }`}>
                  <div className="flex justify-between">
                    <span>Total Poses:</span>
                    <span className={theme === 'dark' ? 'text-indigo-200' : 'text-indigo-700 font-medium'}>
                      {Object.values(sequence).flat().length}
                    </span>
                  </div>
                  <div className="flex justify-between">
                    <span>Estimated Duration:</span>
                    <span className={theme === 'dark' ? 'text-indigo-200' : 'text-indigo-700 font-medium'}>
                      {totalDuration} min
                    </span>
                  </div>
                  <div className="flex justify-between">
                    <span>Difficulty:</span>
                    <span className={theme === 'dark' ? 'text-indigo-200' : 'text-indigo-700 font-medium'}>
                      {selectedLevel}
                    </span>
                  </div>
                </div>
              </div>
            </aside>
          </div>
        </div>
      );
    }

    // Render the app
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<PresenceYoga />);
  </script>
</body>
</html>
