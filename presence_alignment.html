<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#f8f9fa">
    <title>presence • alignment lab</title>
    <script src="presence-content-manager.js"></script>
    <script src="presence-monitoring.js"></script>
    <script src="presence-auto-integrate.js"></script>
    <script src="all-libraries-compact.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;700&family=Newsreader:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Zen Color Palette - Unified */
            --dawn-start: #f8f9fa;
            --dawn-mid: #e9ecef;
            --dawn-end: #dee2e6;
            --text-whisper: #6c757d;
            --text-soft: #495057;
            --text-present: #212529;
            --accent-calm: #8b98a5;
            --accent-focus: #6366f1;
            --accent-success: #84cc16;
            --accent-warning: #f59e0b;
            --accent-alert: #ef4444;
            --surface-primary: rgba(255, 255, 255, 0.4);
            --surface-hover: rgba(255, 255, 255, 0.7);
            --border-subtle: rgba(0, 0, 0, 0.05);
        }
        * {
            -webkit-tap-highlight-color: transparent;
            box-sizing: border-box;
        }
        body {
            font-family: 'JetBrains Mono', monospace;
            background: linear-gradient(180deg, var(--dawn-start) 0%, var(--dawn-mid) 50%, var(--dawn-end) 100%);
            color: var(--text-present);
            margin: 0;
            padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
            min-height: 100vh;
            min-height: -webkit-fill-available;
            overflow-x: hidden;
        }
        html { height: -webkit-fill-available; }
        
        .font-serif { font-family: 'Newsreader', serif; }
        
        .bio-card {
            background: var(--surface-primary);
            border: 1px solid var(--border-subtle);
            backdrop-filter: blur(10px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        @media (hover: hover) {
            .bio-card:hover {
                border-color: rgba(99, 102, 241, 0.3);
                transform: translateY(-2px);
                box-shadow: 0 8px 32px rgba(99, 102, 241, 0.1);
            }
        }
        
        .bio-card:active {
            transform: scale(0.99);
        }
        
        .metric-display {
            font-family: 'JetBrains Mono', monospace;
            font-weight: 300;
            letter-spacing: -0.02em;
        }
        
        .angle-arc {
            stroke: var(--accent-success);
            fill: none;
            stroke-width: 3;
            stroke-linecap: round;
        }
        
        .muscle-highlight {
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .muscle-highlight:hover {
            filter: brightness(1.2);
        }
        
        .muscle-active {
            opacity: 0.7;
        }
        
        .muscle-inactive {
            fill: rgba(139, 152, 165, 0.1);
        }
        
        .skeleton-joint {
            fill: var(--accent-focus);
        }
        
        .alignment-warning {
            animation: pulse-warning 2s ease-in-out infinite;
        }
        
        @keyframes pulse-warning {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }
        
        .biometric-gauge {
            stroke-dasharray: 283;
            stroke-dashoffset: 283;
            transition: stroke-dashoffset 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            transform-origin: center;
        }
        
        .stat-label {
            font-size: 0.65rem;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: var(--text-whisper);
        }
        
        input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 2px;
            background: rgba(0, 0, 0, 0.1);
            outline: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            background: var(--text-present);
            cursor: pointer;
            border-radius: 50%;
        }
        
        input[type="range"]::-moz-range-thumb {
            width: 16px;
            height: 16px;
            background: var(--text-present);
            cursor: pointer;
            border-radius: 50%;
            border: none;
        }
        
        .pose-skeleton {
            stroke: rgba(73, 80, 87, 0.3);
            stroke-width: 2;
            fill: none;
        }
        
        @media (max-width: 640px) {
            .mobile-text-lg { font-size: 1rem !important; }
            .mobile-text-xl { font-size: 1.25rem !important; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Anatomical data for major muscle groups - Updated with Zen colors
        const MUSCLE_GROUPS = {
            quadriceps: { name: 'Quadriceps', color: '#84cc16', poses: ['warrior', 'chair', 'lunge'] },
            hamstrings: { name: 'Hamstrings', color: '#6366f1', poses: ['forward-fold', 'pyramid', 'downdog'] },
            glutes: { name: 'Gluteus Maximus', color: '#f59e0b', poses: ['warrior', 'bridge', 'chair'] },
            core: { name: 'Core (Rectus Abdominis)', color: '#ef4444', poses: ['plank', 'boat', 'side-plank'] },
            shoulders: { name: 'Deltoids', color: '#8b98a5', poses: ['downdog', 'plank', 'side-plank'] },
            back: { name: 'Erector Spinae', color: '#6366f1', poses: ['warrior', 'bridge', 'cobra'] },
            calves: { name: 'Gastrocnemius', color: '#f59e0b', poses: ['warrior', 'chair', 'tree'] },
            hip_flexors: { name: 'Iliopsoas', color: '#84cc16', poses: ['lunge', 'warrior', 'tree'] }
        };

        // Alignment checkpoints with biomechanical angles
        const POSES = {
            warrior1: {
                name: "Warrior I",
                checkpoints: [
                    { joint: 'front_knee', ideal: 90, range: [85, 95], label: 'Front Knee Angle' },
                    { joint: 'hip_alignment', ideal: 0, range: [-5, 5], label: 'Hip Square to Front' },
                    { joint: 'back_leg', ideal: 180, range: [170, 180], label: 'Back Leg Extension' },
                    { joint: 'spine', ideal: 0, range: [-10, 10], label: 'Spine Neutral' }
                ],
                muscles: ['quadriceps', 'glutes', 'hip_flexors', 'core'],
                difficulty: 'intermediate'
            },
            downdog: {
                name: "Downward Dog",
                checkpoints: [
                    { joint: 'shoulder', ideal: 180, range: [160, 180], label: 'Shoulder Flexion' },
                    { joint: 'spine', ideal: 0, range: [-5, 5], label: 'Spine Lengthening' },
                    { joint: 'hip', ideal: 90, range: [70, 110], label: 'Hip Angle' },
                    { joint: 'heel', ideal: 0, range: [0, 20], label: 'Heel to Ground' }
                ],
                muscles: ['hamstrings', 'shoulders', 'back', 'calves'],
                difficulty: 'beginner'
            },
            plank: {
                name: "Plank",
                checkpoints: [
                    { joint: 'shoulder', ideal: 90, range: [85, 95], label: 'Shoulder Stack' },
                    { joint: 'hip', ideal: 180, range: [170, 180], label: 'Hip Neutral' },
                    { joint: 'spine', ideal: 0, range: [-5, 5], label: 'Spine Alignment' },
                    { joint: 'head', ideal: 0, range: [-10, 10], label: 'Neck Neutral' }
                ],
                muscles: ['core', 'shoulders', 'quadriceps', 'glutes'],
                difficulty: 'beginner'
            },
            tree: {
                name: "Tree Pose",
                checkpoints: [
                    { joint: 'standing_leg', ideal: 180, range: [175, 180], label: 'Standing Leg Extension' },
                    { joint: 'hip_rotation', ideal: 90, range: [45, 90], label: 'External Hip Rotation' },
                    { joint: 'pelvis', ideal: 0, range: [-5, 5], label: 'Pelvis Level' },
                    { joint: 'spine', ideal: 0, range: [-5, 5], label: 'Spine Vertical' }
                ],
                muscles: ['glutes', 'hip_flexors', 'calves', 'core'],
                difficulty: 'beginner'
            },
            triangle: {
                name: "Triangle Pose",
                checkpoints: [
                    { joint: 'front_leg', ideal: 180, range: [175, 180], label: 'Front Leg Extension' },
                    { joint: 'spine_lateral', ideal: 0, range: [-10, 10], label: 'Spine Side Bend' },
                    { joint: 'shoulder_stack', ideal: 90, range: [80, 90], label: 'Shoulders Stacked' },
                    { joint: 'hip_open', ideal: 180, range: [160, 180], label: 'Hip Opening' }
                ],
                muscles: ['hamstrings', 'quadriceps', 'obliques', 'hip_flexors'],
                difficulty: 'intermediate'
            },
            bridge: {
                name: "Bridge Pose",
                checkpoints: [
                    { joint: 'knee_angle', ideal: 90, range: [85, 95], label: 'Knee Angle' },
                    { joint: 'hip_extension', ideal: 165, range: [155, 175], label: 'Hip Extension' },
                    { joint: 'shoulder_roll', ideal: 0, range: [-10, 10], label: 'Shoulders Under' },
                    { joint: 'spine_curve', ideal: 20, range: [10, 30], label: 'Thoracic Extension' }
                ],
                muscles: ['glutes', 'hamstrings', 'back', 'core'],
                difficulty: 'beginner'
            },
            chair: {
                name: "Chair Pose (Utkatasana)",
                checkpoints: [
                    { joint: 'knee_angle', ideal: 90, range: [80, 100], label: 'Knee Bend' },
                    { joint: 'hip_hinge', ideal: 45, range: [35, 55], label: 'Hip Hinge' },
                    { joint: 'spine', ideal: 0, range: [-15, 5], label: 'Spine Extension' },
                    { joint: 'shoulder_raise', ideal: 180, range: [160, 180], label: 'Arms Overhead' }
                ],
                muscles: ['quadriceps', 'glutes', 'core', 'shoulders'],
                difficulty: 'intermediate'
            },
            pigeon: {
                name: "Pigeon Pose",
                checkpoints: [
                    { joint: 'front_hip', ideal: 90, range: [60, 120], label: 'Front Hip External Rotation' },
                    { joint: 'back_hip', ideal: 180, range: [170, 180], label: 'Back Hip Extension' },
                    { joint: 'pelvis', ideal: 0, range: [-15, 15], label: 'Pelvis Square' },
                    { joint: 'spine', ideal: 0, range: [-20, 20], label: 'Spine Alignment' }
                ],
                muscles: ['glutes', 'hip_flexors', 'hamstrings'],
                difficulty: 'intermediate'
            }
        };

        // Common alignment issues and corrections
        const ALIGNMENT_ISSUES = {
            forward_head: {
                name: "Forward Head Posture",
                description: "Head positioned forward of shoulders, common from desk work and phone use",
                assessment: {
                    ideal_angle: 0,
                    range: [-15, 15],
                    measurement: "Ear should align vertically over shoulder when viewed from side"
                },
                causes: [
                    "Prolonged screen time",
                    "Weak deep neck flexors",
                    "Tight chest and anterior neck muscles",
                    "Poor sitting posture"
                ],
                corrections: [
                    {
                        name: "Chin Tucks",
                        reps: "10-15 reps, 3-5 second holds",
                        description: "Gently draw chin straight back (not down) to align ear over shoulder"
                    },
                    {
                        name: "Wall Angels",
                        reps: "10-12 reps, slow and controlled",
                        description: "Stand against wall, slide arms up and down maintaining contact with wall"
                    },
                    {
                        name: "Neck Extensor Strengthening",
                        reps: "8-10 reps, 5 second holds",
                        description: "Lie face down, lift head against gravity or light resistance"
                    }
                ],
                stretches: [
                    "Chest doorway stretch (2 min hold)",
                    "Upper trapezius stretch (30 sec each side)",
                    "Levator scapulae stretch (30 sec each side)"
                ]
            },
            rounded_shoulders: {
                name: "Rounded Shoulders",
                description: "Shoulders rolled forward, scapulae protracted, common with poor posture",
                assessment: {
                    ideal_angle: 0,
                    range: [-10, 10],
                    measurement: "Acromion (shoulder point) should align over mid-torso from side view"
                },
                causes: [
                    "Tight pectoralis major and minor",
                    "Weak rhomboids and mid-trapezius",
                    "Excessive internal rotation",
                    "Poor ergonomic setup"
                ],
                corrections: [
                    {
                        name: "Scapular Retractions",
                        reps: "15-20 reps, 3 second holds",
                        description: "Squeeze shoulder blades together, down and back"
                    },
                    {
                        name: "Band Pull-Aparts",
                        reps: "12-15 reps",
                        description: "Pull resistance band apart at chest height, focus on squeezing shoulder blades"
                    },
                    {
                        name: "Prone Y-Raises",
                        reps: "10-12 reps",
                        description: "Lie face down, raise arms in Y position, thumbs up"
                    }
                ],
                stretches: [
                    "Doorway pec stretch (90° and 45° angles, 90 sec each)",
                    "Child's pose with shoulder flexion (2 min)",
                    "Thread the needle stretch (60 sec each side)"
                ]
            },
            anterior_pelvic_tilt: {
                name: "Anterior Pelvic Tilt",
                description: "Pelvis rotated forward, often causing lower back arch and belly protrusion",
                assessment: {
                    ideal_angle: 8-12,
                    range: [5, 15],
                    measurement: "ASIS to PSIS alignment should be nearly horizontal, 8-12° tilt normal"
                },
                causes: [
                    "Tight hip flexors (iliopsoas)",
                    "Weak glutes and hamstrings",
                    "Weak abdominals",
                    "Prolonged sitting"
                ],
                corrections: [
                    {
                        name: "Dead Bug",
                        reps: "10 reps each side",
                        description: "Maintain neutral spine, extend opposite arm and leg without arching back"
                    },
                    {
                        name: "Glute Bridges",
                        reps: "15-20 reps",
                        description: "Drive through heels, squeeze glutes at top, maintain neutral pelvis"
                    },
                    {
                        name: "Planks (Posterior Tilt)",
                        reps: "30-60 sec holds",
                        description: "Tuck tailbone slightly, engage abs to maintain neutral spine"
                    }
                ],
                stretches: [
                    "Kneeling hip flexor stretch (90 sec each side)",
                    "Quad stretch with posterior pelvic tilt (60 sec each)",
                    "Low lunge with hip flexor emphasis (90 sec each)"
                ]
            },
            knee_valgus: {
                name: "Knee Valgus (Knock-Knees)",
                description: "Knees collapsing inward during movement, increases injury risk",
                assessment: {
                    ideal_angle: 0,
                    range: [-5, 5],
                    measurement: "Knee should track over 2nd-3rd toe during squatting movements"
                },
                causes: [
                    "Weak hip abductors (glute medius)",
                    "Weak glute maximus",
                    "Overpronated feet",
                    "Poor motor control"
                ],
                corrections: [
                    {
                        name: "Banded Side Steps",
                        reps: "15 steps each direction",
                        description: "Band around knees, step sideways maintaining tension, knees out"
                    },
                    {
                        name: "Single-Leg Squats with Mirror",
                        reps: "8-10 reps each leg",
                        description: "Monitor knee alignment, keep knee tracking over toes"
                    },
                    {
                        name: "Clamshells",
                        reps: "15-20 reps each side",
                        description: "Side-lying, knees bent, lift top knee while keeping feet together"
                    }
                ],
                stretches: [
                    "IT band foam rolling (60-90 sec)",
                    "Pigeon pose for external rotation (2 min each side)",
                    "Standing quad stretch (45 sec each)"
                ]
            }
        };

        // Targeted strength exercises by muscle group
        const STRENGTH_EXERCISES = {
            core: {
                name: "Core Strengthening",
                exercises: [
                    {
                        name: "Dead Bug",
                        muscles: "Transverse abdominis, rectus abdominis, obliques",
                        sets: "3 sets x 10 reps each side",
                        cues: "Press low back to floor, extend opposite arm and leg slowly, exhale on extension"
                    },
                    {
                        name: "Bird Dog",
                        muscles: "Erector spinae, glutes, core stabilizers",
                        sets: "3 sets x 10 reps each side",
                        cues: "Maintain neutral spine, extend arm and leg without rotating torso, pause 2 seconds"
                    },
                    {
                        name: "Plank Variations",
                        muscles: "Entire core, shoulders",
                        sets: "3 sets x 30-60 sec",
                        cues: "Elbows under shoulders, body in straight line, tuck tailbone slightly"
                    },
                    {
                        name: "Pallof Press",
                        muscles: "Anti-rotation core, obliques",
                        sets: "3 sets x 12 reps each side",
                        cues: "Resist rotation from band, press straight out from chest, control return"
                    }
                ]
            },
            glutes: {
                name: "Glute Development",
                exercises: [
                    {
                        name: "Hip Thrust",
                        muscles: "Gluteus maximus, hamstrings",
                        sets: "4 sets x 12-15 reps",
                        cues: "Drive through heels, full hip extension, squeeze glutes at top for 2 seconds"
                    },
                    {
                        name: "Bulgarian Split Squat",
                        muscles: "Glutes, quadriceps, balance",
                        sets: "3 sets x 10 reps each leg",
                        cues: "Front foot far enough forward, vertical shin, drive through front heel"
                    },
                    {
                        name: "Banded Glute Kickbacks",
                        muscles: "Glute maximus isolation",
                        sets: "3 sets x 15-20 reps",
                        cues: "Keep hips square, extend hip without arching low back, control eccentric"
                    },
                    {
                        name: "Clamshells",
                        muscles: "Glute medius (hip abduction)",
                        sets: "3 sets x 20 reps each side",
                        cues: "Maintain pelvis stable, lift knee without rotating torso, pause at top"
                    }
                ]
            },
            shoulders: {
                name: "Shoulder Stability & Strength",
                exercises: [
                    {
                        name: "Face Pulls",
                        muscles: "Rear deltoids, rhomboids, external rotators",
                        sets: "3 sets x 15-20 reps",
                        cues: "Pull to face level, externally rotate at end range, squeeze shoulder blades"
                    },
                    {
                        name: "YTW Raises",
                        muscles: "All three deltoid heads, rotator cuff",
                        sets: "3 sets x 8 reps each position",
                        cues: "Thumbs up, controlled movement, focus on scapular retraction"
                    },
                    {
                        name: "Overhead Press",
                        muscles: "Anterior and lateral deltoids, triceps, core",
                        sets: "4 sets x 8-10 reps",
                        cues: "Elbows slightly forward, press straight up, avoid arching lower back"
                    },
                    {
                        name: "Scaption Raises",
                        muscles: "Supraspinatus, deltoids",
                        sets: "3 sets x 12-15 reps",
                        cues: "Raise arms 30° forward of lateral plane, thumbs up, stop at shoulder height"
                    }
                ]
            },
            hip_flexors: {
                name: "Hip Mobility & Control",
                exercises: [
                    {
                        name: "90/90 Hip Switches",
                        muscles: "Hip internal/external rotation, mobility",
                        sets: "3 sets x 10 reps each side",
                        cues: "Sit tall, switch legs smoothly, keep knees at 90°, chest up"
                    },
                    {
                        name: "Copenhagen Plank",
                        muscles: "Hip adductors, core, obliques",
                        sets: "3 sets x 20-30 sec each side",
                        cues: "Top leg on bench, bottom leg lifted, maintain straight line"
                    },
                    {
                        name: "Reverse Lunges",
                        muscles: "Hip flexors (eccentric), quads, glutes",
                        sets: "3 sets x 12 reps each leg",
                        cues: "Step back, lower knee toward ground, drive through front heel to return"
                    },
                    {
                        name: "Banded Hip Marches",
                        muscles: "Iliopsoas, core stability",
                        sets: "3 sets x 20 reps",
                        cues: "Band around feet, march in place maintaining resistance, stay tall"
                    }
                ]
            }
        };

        // Mobility assessment routines
        const MOBILITY_ASSESSMENTS = {
            shoulder_mobility: {
                name: "Shoulder Mobility Assessment",
                description: "Evaluate shoulder flexion, extension, and rotation range of motion",
                tests: [
                    {
                        name: "Overhead Reach Test",
                        passing: "Arms reach vertical (180°) without arching lower back",
                        failing: "Unable to reach vertical, or compensates with back arch",
                        improvement: "Thoracic extension work, lat stretching, pec minor release"
                    },
                    {
                        name: "Behind-Back Scratch Test",
                        passing: "Hands can clasp behind back from overhead and underhand",
                        failing: "Hands don't meet, or significant difference between sides",
                        improvement: "Sleeper stretch, cross-body stretch, internal rotation work"
                    },
                    {
                        name: "Wall Slide Test",
                        passing: "Arms slide overhead maintaining wrist, elbow, and back contact with wall",
                        failing: "Lower back arches, elbows leave wall, or wrists can't stay flat",
                        improvement: "Pec stretching, scapular wall slides, thoracic mobility drills"
                    }
                ]
            },
            hip_mobility: {
                name: "Hip Mobility Assessment",
                description: "Evaluate hip flexion, extension, rotation, and abduction",
                tests: [
                    {
                        name: "Thomas Test (Hip Flexor Length)",
                        passing: "Lying on table edge, opposite leg hangs with thigh parallel to ground",
                        failing: "Thigh lifts up, indicating tight hip flexors",
                        improvement: "Kneeling hip flexor stretch, couch stretch, psoas release"
                    },
                    {
                        name: "90/90 Test (Hip Rotation)",
                        passing: "Knees touch ground in both internal and external rotation positions",
                        failing: "Knees lift significantly, or can't switch positions smoothly",
                        improvement: "90/90 stretching, hip CARs, pigeon pose, figure-4 stretch"
                    },
                    {
                        name: "Deep Squat Assessment",
                        passing: "Full squat with heels down, upright torso, knees tracking over toes",
                        failing: "Heels lift, excessive forward lean, or knees cave inward",
                        improvement: "Goblet squats, ankle mobility work, hip flexor strengthening"
                    }
                ]
            },
            spine_mobility: {
                name: "Spinal Mobility Assessment",
                description: "Evaluate thoracic and lumbar spine movement",
                tests: [
                    {
                        name: "Thoracic Rotation Test",
                        passing: "Can rotate 50-60° each direction while keeping hips stable",
                        failing: "Less than 40° rotation, or compensates with hip/shoulder movement",
                        improvement: "Thread the needle, open books, quadruped rotations"
                    },
                    {
                        name: "Cat-Cow Assessment",
                        passing: "Smooth segmental motion through entire spine, equal flexion/extension",
                        failing: "Hinging at one segment, limited thoracic movement",
                        improvement: "Segmental cat-cow, thoracic extensions on foam roller"
                    },
                    {
                        name: "Toe Touch Test",
                        passing: "Fingertips reach toes or floor with knees straight",
                        failing: "Significant distance from toes, or must bend knees",
                        improvement: "Hamstring stretching, hip hinge practice, nerve glides"
                    }
                ]
            },
            ankle_mobility: {
                name: "Ankle Mobility Assessment",
                description: "Evaluate dorsiflexion range critical for squatting and walking",
                tests: [
                    {
                        name: "Wall Knee-to-Wall Test",
                        passing: "Knee touches wall with toes 5 inches back, heel down",
                        failing: "Heel lifts before knee touches, or can't reach 5 inches",
                        improvement: "Calf stretching (bent and straight knee), ankle mobilizations"
                    },
                    {
                        name: "Single-Leg Balance",
                        passing: "Can balance 30+ seconds on each leg with eyes closed",
                        failing: "Significant wobbling, or can't maintain 10 seconds",
                        improvement: "Proprioception drills, single-leg exercises, balance board work"
                    }
                ]
            }
        };

        function AlignmentLab() {
            const [selectedPose, setSelectedPose] = useState('warrior1');
            const [angles, setAngles] = useState({});
            const [activeMuscles, setActiveMuscles] = useState([]);
            const [view, setView] = useState('analysis'); // 'analysis', 'anatomy', 'biometrics'

            useEffect(() => {
                // Initialize angles with ideal values
                const pose = POSES[selectedPose];
                const initialAngles = {};
                pose.checkpoints.forEach(cp => {
                    initialAngles[cp.joint] = cp.ideal;
                });
                setAngles(initialAngles);
                setActiveMuscles(pose.muscles);
            }, [selectedPose]);

            const updateAngle = (joint, value) => {
                setAngles({ ...angles, [joint]: parseFloat(value) });
            };

            const getAlignmentStatus = (joint) => {
                const pose = POSES[selectedPose];
                const checkpoint = pose.checkpoints.find(cp => cp.joint === joint);
                const angle = angles[joint] || checkpoint.ideal;
                
                if (angle >= checkpoint.range[0] && angle <= checkpoint.range[1]) {
                    return 'optimal';
                } else if (Math.abs(angle - checkpoint.ideal) <= 15) {
                    return 'acceptable';
                } else {
                    return 'misaligned';
                }
            };

            const getStatusColor = (status) => {
                switch(status) {
                    case 'optimal': return '#84cc16';      // accent-success (lime)
                    case 'acceptable': return '#6366f1';   // accent-focus (indigo)
                    case 'misaligned': return '#ef4444';   // accent-alert (red)
                    default: return '#6c757d';             // text-whisper
                }
            };

            return (
                <div className="min-h-screen p-4 sm:p-8">
                    <div className="max-w-7xl mx-auto">
                        {/* Header */}
                        <header className="mb-8 sm:mb-12">
                            <a href="index.html" className="text-xs uppercase tracking-widest mb-4 block hover:text-[var(--text-present)] transition-colors" style={{ color: 'var(--accent-focus)' }}>
                                ← Hub
                            </a>
                            <h1 className="text-4xl sm:text-6xl font-light mb-2" style={{ color: 'var(--text-present)' }}>Alignment Lab</h1>
                            <p className="text-sm" style={{ color: 'var(--text-soft)' }}>Biomechanical Analysis & Anatomical Mapping</p>
                        </header>

                        {/* View Switcher */}
                        <div className="flex gap-2 mb-8 overflow-x-auto pb-2">
                            {['analysis', 'anatomy', 'biometrics', 'issues', 'exercises', 'mobility'].map(v => (
                                <button
                                    key={v}
                                    onClick={() => setView(v)}
                                    className={`px-6 py-3 rounded-lg text-xs uppercase tracking-widest transition-all min-h-[44px] whitespace-nowrap`}
                                    style={view === v 
                                        ? { background: 'var(--accent-focus)', color: 'white' }
                                        : { background: 'var(--surface-primary)', color: 'var(--text-soft)', border: '1px solid var(--border-subtle)' }
                                    }
                                >
                                    {v}
                                </button>
                            ))}
                        </div>

                        {/* Pose Selector */}
                        <div className="grid grid-cols-2 sm:grid-cols-4 gap-3 mb-8">
                            {Object.entries(POSES).map(([key, pose]) => (
                                <button
                                    key={key}
                                    onClick={() => setSelectedPose(key)}
                                    className="bio-card p-4 rounded-xl text-left transition-all min-h-[44px]"
                                    style={selectedPose === key 
                                        ? { borderColor: 'var(--accent-focus)', borderWidth: '2px' }
                                        : {}
                                    }
                                >
                                    <div className="stat-label mb-2">{pose.difficulty}</div>
                                    <div className="text-sm font-medium">{pose.name}</div>
                                </button>
                            ))}
                        </div>

                        {/* Main Content */}
                        {view === 'analysis' && (
                            <AnalysisView 
                                pose={POSES[selectedPose]} 
                                angles={angles} 
                                updateAngle={updateAngle}
                                getAlignmentStatus={getAlignmentStatus}
                                getStatusColor={getStatusColor}
                            />
                        )}

                        {view === 'anatomy' && (
                            <AnatomyView 
                                activeMuscles={activeMuscles}
                                pose={POSES[selectedPose]}
                            />
                        )}

                        {view === 'biometrics' && (
                            <BiometricsView 
                                pose={POSES[selectedPose]}
                                angles={angles}
                                getAlignmentStatus={getAlignmentStatus}
                            />
                        )}

                        {view === 'issues' && <AlignmentIssuesView />}
                        
                        {view === 'exercises' && <ExercisesView />}
                        
                        {view === 'mobility' && <MobilityView />}
                    </div>
                </div>
            );
        }

        // New view components
        function AlignmentIssuesView() {
            const [selectedIssue, setSelectedIssue] = React.useState('forward_head');
            const issue = ALIGNMENT_ISSUES[selectedIssue];

            return (
                <div className="space-y-6">
                    {/* Issue Selector */}
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                        {Object.entries(ALIGNMENT_ISSUES).map(([key, iss]) => (
                            <button
                                key={key}
                                onClick={() => setSelectedIssue(key)}
                                className="bio-card p-5 rounded-xl text-left transition-all"
                                style={selectedIssue === key ? { borderColor: 'var(--accent-alert)', borderWidth: '2px' } : {}}
                            >
                                <div className="text-sm font-medium mb-2" style={{ color: 'var(--text-present)' }}>{iss.name}</div>
                                <div className="text-xs" style={{ color: 'var(--text-soft)' }}>{iss.description}</div>
                            </button>
                        ))}
                    </div>

                    {/* Issue Details */}
                    <div className="bio-card p-8 rounded-2xl">
                        <h3 className="text-2xl font-serif mb-4" style={{ color: 'var(--text-present)' }}>{issue.name}</h3>
                        <p className="text-sm mb-6" style={{ color: 'var(--text-soft)' }}>{issue.description}</p>

                        {/* Assessment */}
                        <div className="mb-6 p-4 rounded-lg" style={{ background: 'rgba(99, 102, 241, 0.1)' }}>
                            <div className="text-xs uppercase tracking-wider mb-2" style={{ color: 'var(--accent-focus)' }}>Assessment</div>
                            <div className="text-sm" style={{ color: 'var(--text-present)' }}>{issue.assessment.measurement}</div>
                        </div>

                        {/* Causes */}
                        <div className="mb-6">
                            <div className="text-xs uppercase tracking-wider mb-3" style={{ color: 'var(--text-whisper)' }}>Common Causes</div>
                            <ul className="space-y-2">
                                {issue.causes.map((cause, idx) => (
                                    <li key={idx} className="text-sm flex items-start">
                                        <span style={{ color: 'var(--accent-alert)', marginRight: '0.5rem' }}>•</span>
                                        <span style={{ color: 'var(--text-soft)' }}>{cause}</span>
                                    </li>
                                ))}
                            </ul>
                        </div>

                        {/* Corrective Exercises */}
                        <div className="mb-6">
                            <div className="text-xs uppercase tracking-wider mb-3" style={{ color: 'var(--text-whisper)' }}>Corrective Exercises</div>
                            <div className="space-y-4">
                                {issue.corrections.map((ex, idx) => (
                                    <div key={idx} className="p-4 rounded-lg" style={{ background: 'rgba(132, 204, 22, 0.1)' }}>
                                        <div className="flex justify-between items-start mb-2">
                                            <div className="font-medium text-sm" style={{ color: 'var(--text-present)' }}>{ex.name}</div>
                                            <div className="text-xs" style={{ color: 'var(--accent-success)' }}>{ex.reps}</div>
                                        </div>
                                        <div className="text-xs" style={{ color: 'var(--text-soft)' }}>{ex.description}</div>
                                    </div>
                                ))}
                            </div>
                        </div>

                        {/* Stretches */}
                        <div>
                            <div className="text-xs uppercase tracking-wider mb-3" style={{ color: 'var(--text-whisper)' }}>Recommended Stretches</div>
                            <ul className="space-y-2">
                                {issue.stretches.map((stretch, idx) => (
                                    <li key={idx} className="text-sm flex items-start">
                                        <span style={{ color: 'var(--accent-focus)', marginRight: '0.5rem' }}>→</span>
                                        <span style={{ color: 'var(--text-soft)' }}>{stretch}</span>
                                    </li>
                                ))}
                            </ul>
                        </div>
                    </div>
                </div>
            );
        }

        function ExercisesView() {
            const [selectedGroup, setSelectedGroup] = React.useState('core');
            const group = STRENGTH_EXERCISES[selectedGroup];

            return (
                <div className="space-y-6">
                    {/* Muscle Group Selector */}
                    <div className="grid grid-cols-2 md:grid-cols-4 gap-3">
                        {Object.entries(STRENGTH_EXERCISES).map(([key, grp]) => (
                            <button
                                key={key}
                                onClick={() => setSelectedGroup(key)}
                                className="bio-card p-4 rounded-xl text-center transition-all min-h-[44px]"
                                style={selectedGroup === key ? { borderColor: 'var(--accent-success)', borderWidth: '2px' } : {}}
                            >
                                <div className="text-sm font-medium" style={{ color: 'var(--text-present)' }}>{grp.name}</div>
                            </button>
                        ))}
                    </div>

                    {/* Exercise List */}
                    <div className="grid md:grid-cols-2 gap-4">
                        {group.exercises.map((ex, idx) => (
                            <div key={idx} className="bio-card p-6 rounded-2xl">
                                <div className="flex justify-between items-start mb-4">
                                    <h4 className="text-lg font-medium" style={{ color: 'var(--text-present)' }}>{ex.name}</h4>
                                    <div className="text-xs px-3 py-1 rounded-full" style={{ background: 'var(--accent-success)', color: 'white' }}>{idx + 1}</div>
                                </div>
                                
                                <div className="space-y-3">
                                    <div>
                                        <div className="text-xs uppercase tracking-wider mb-1" style={{ color: 'var(--text-whisper)' }}>Target Muscles</div>
                                        <div className="text-sm" style={{ color: 'var(--text-soft)' }}>{ex.muscles}</div>
                                    </div>
                                    
                                    <div>
                                        <div className="text-xs uppercase tracking-wider mb-1" style={{ color: 'var(--text-whisper)' }}>Programming</div>
                                        <div className="text-sm font-medium" style={{ color: 'var(--accent-focus)' }}>{ex.sets}</div>
                                    </div>
                                    
                                    <div>
                                        <div className="text-xs uppercase tracking-wider mb-1" style={{ color: 'var(--text-whisper)' }}>Key Cues</div>
                                        <div className="text-sm" style={{ color: 'var(--text-soft)' }}>{ex.cues}</div>
                                    </div>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        }

        function MobilityView() {
            const [selectedAssessment, setSelectedAssessment] = React.useState('shoulder_mobility');
            const assessment = MOBILITY_ASSESSMENTS[selectedAssessment];

            return (
                <div className="space-y-6">
                    {/* Assessment Selector */}
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                        {Object.entries(MOBILITY_ASSESSMENTS).map(([key, assess]) => (
                            <button
                                key={key}
                                onClick={() => setSelectedAssessment(key)}
                                className="bio-card p-5 rounded-xl text-left transition-all"
                                style={selectedAssessment === key ? { borderColor: 'var(--accent-focus)', borderWidth: '2px' } : {}}
                            >
                                <div className="text-sm font-medium mb-2" style={{ color: 'var(--text-present)' }}>{assess.name}</div>
                                <div className="text-xs" style={{ color: 'var(--text-soft)' }}>{assess.description}</div>
                            </button>
                        ))}
                    </div>

                    {/* Assessment Details */}
                    <div className="bio-card p-8 rounded-2xl">
                        <h3 className="text-2xl font-serif mb-4" style={{ color: 'var(--text-present)' }}>{assessment.name}</h3>
                        <p className="text-sm mb-6" style={{ color: 'var(--text-soft)' }}>{assessment.description}</p>

                        {/* Tests */}
                        <div className="space-y-6">
                            {assessment.tests.map((test, idx) => (
                                <div key={idx} className="p-5 rounded-lg" style={{ background: 'rgba(99, 102, 241, 0.05)', border: '1px solid rgba(99, 102, 241, 0.2)' }}>
                                    <div className="font-medium text-sm mb-3" style={{ color: 'var(--text-present)' }}>{test.name}</div>
                                    
                                    <div className="grid md:grid-cols-2 gap-4 mb-3">
                                        <div className="p-3 rounded" style={{ background: 'rgba(132, 204, 22, 0.1)' }}>
                                            <div className="text-xs uppercase tracking-wider mb-1" style={{ color: 'var(--accent-success)' }}>✓ Passing</div>
                                            <div className="text-xs" style={{ color: 'var(--text-soft)' }}>{test.passing}</div>
                                        </div>
                                        
                                        <div className="p-3 rounded" style={{ background: 'rgba(239, 68, 68, 0.1)' }}>
                                            <div className="text-xs uppercase tracking-wider mb-1" style={{ color: 'var(--accent-alert)' }}>✗ Failing</div>
                                            <div className="text-xs" style={{ color: 'var(--text-soft)' }}>{test.failing}</div>
                                        </div>
                                    </div>
                                    
                                    <div className="p-3 rounded" style={{ background: 'rgba(99, 102, 241, 0.1)' }}>
                                        <div className="text-xs uppercase tracking-wider mb-1" style={{ color: 'var(--accent-focus)' }}>→ Improvement Strategy</div>
                                        <div className="text-xs" style={{ color: 'var(--text-soft)' }}>{test.improvement}</div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        }

        function AnalysisView({ pose, angles, updateAngle, getAlignmentStatus, getStatusColor }) {
            return (
                <div className="grid lg:grid-cols-2 gap-6">
                    {/* Skeleton Visualization */}
                    <div className="bio-card p-6 sm:p-8 rounded-2xl">
                        <div className="stat-label mb-6">Skeletal Alignment</div>
                        <SkeletonDiagram pose={pose} angles={angles} getStatusColor={getStatusColor} />
                    </div>

                    {/* Alignment Controls */}
                    <div className="space-y-4">
                        <div className="bio-card p-6 sm:p-8 rounded-2xl">
                            <div className="stat-label mb-6">Joint Angles (degrees)</div>
                            <div className="space-y-6">
                                {pose.checkpoints.map(checkpoint => {
                                    const status = getAlignmentStatus(checkpoint.joint);
                                    const currentAngle = angles[checkpoint.joint] || checkpoint.ideal;
                                    
                                    return (
                                        <div key={checkpoint.joint}>
                                            <div className="flex justify-between mb-2">
                                                <span className="text-xs text-[var(--text-secondary)]">{checkpoint.label}</span>
                                                <div className="flex items-center gap-3">
                                                    <span 
                                                        className="metric-display text-2xl"
                                                        style={{ color: getStatusColor(status) }}
                                                    >
                                                        {currentAngle}°
                                                    </span>
                                                    <span className="text-xs text-[var(--text-tertiary)]">
                                                        ({checkpoint.ideal}°)
                                                    </span>
                                                </div>
                                            </div>
                                            <input
                                                type="range"
                                                min="0"
                                                max="180"
                                                value={currentAngle}
                                                onChange={(e) => updateAngle(checkpoint.joint, e.target.value)}
                                                className="w-full"
                                            />
                                            <div className="flex justify-between text-xs text-[var(--text-tertiary)] mt-1">
                                                <span>Optimal: {checkpoint.range[0]}-{checkpoint.range[1]}°</span>
                                                <span className="uppercase tracking-wider" style={{ color: getStatusColor(status) }}>
                                                    {status}
                                                </span>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        </div>

                        {/* Quick Stats */}
                        <div className="bio-card p-6 rounded-2xl">
                            <div className="stat-label mb-4">Alignment Score</div>
                            <div className="grid grid-cols-3 gap-4 text-center">
                                <div>
                                    <div className="text-3xl metric-display" style={{ color: '#84cc16' }}>
                                        {pose.checkpoints.filter(cp => getAlignmentStatus(cp.joint) === 'optimal').length}
                                    </div>
                                    <div className="text-xs mt-1" style={{ color: 'var(--text-whisper)' }}>Optimal</div>
                                </div>
                                <div>
                                    <div className="text-3xl metric-display" style={{ color: '#6366f1' }}>
                                        {pose.checkpoints.filter(cp => getAlignmentStatus(cp.joint) === 'acceptable').length}
                                    </div>
                                    <div className="text-xs mt-1" style={{ color: 'var(--text-whisper)' }}>Acceptable</div>
                                </div>
                                <div>
                                    <div className="text-3xl metric-display" style={{ color: '#ef4444' }}>
                                        {pose.checkpoints.filter(cp => getAlignmentStatus(cp.joint) === 'misaligned').length}
                                    </div>
                                    <div className="text-xs mt-1" style={{ color: 'var(--text-whisper)' }}>Misaligned</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        function SkeletonDiagram({ pose, angles, getStatusColor }) {
            return (
                <div className="relative w-full aspect-square max-w-md mx-auto">
                    <svg viewBox="0 0 400 600" className="w-full h-full">
                        {/* Simplified stick figure with joint highlights */}
                        <g id="skeleton">
                            {/* Head */}
                            <circle cx="200" cy="80" r="30" className="pose-skeleton" />
                            
                            {/* Spine */}
                            <line x1="200" y1="110" x2="200" y2="300" className="pose-skeleton" />
                            
                            {/* Arms */}
                            <line x1="200" y1="150" x2="140" y2="220" className="pose-skeleton" />
                            <line x1="200" y1="150" x2="260" y2="220" className="pose-skeleton" />
                            <line x1="140" y1="220" x2="120" y2="300" className="pose-skeleton" />
                            <line x1="260" y1="220" x2="280" y2="300" className="pose-skeleton" />
                            
                            {/* Legs */}
                            <line x1="200" y1="300" x2="160" y2="440" className="pose-skeleton" />
                            <line x1="200" y1="300" x2="240" y2="440" className="pose-skeleton" />
                            <line x1="160" y1="440" x2="150" y2="550" className="pose-skeleton" />
                            <line x1="240" y1="440" x2="250" y2="550" className="pose-skeleton" />
                            
                            {/* Joints */}
                            <circle cx="200" cy="150" r="8" className="skeleton-joint" /> {/* Shoulders */}
                            <circle cx="140" cy="220" r="6" className="skeleton-joint" /> {/* Elbows */}
                            <circle cx="260" cy="220" r="6" className="skeleton-joint" />
                            <circle cx="200" cy="300" r="8" className="skeleton-joint" /> {/* Hips */}
                            <circle cx="160" cy="440" r="6" className="skeleton-joint" /> {/* Knees */}
                            <circle cx="240" cy="440" r="6" className="skeleton-joint" />
                            
                            {/* Angle arc visualization (example for knee) */}
                            {pose.checkpoints.map((cp, idx) => {
                                const status = cp.joint;
                                const y = 150 + (idx * 100);
                                return (
                                    <g key={cp.joint}>
                                        <path 
                                            d={`M ${320 + Math.cos(0) * 30} ${y + Math.sin(0) * 30} A 30 30 0 0 1 ${320 + Math.cos(Math.PI/2) * 30} ${y + Math.sin(Math.PI/2) * 30}`}
                                            className="angle-arc"
                                            style={{ stroke: getStatusColor(status) }}
                                        />
                                        <text x="360" y={y + 5} fill={getStatusColor(status)} fontSize="12" fontFamily="JetBrains Mono">
                                            {angles[cp.joint] || cp.ideal}°
                                        </text>
                                    </g>
                                );
                            })}
                        </g>
                    </svg>
                </div>
            );
        }

        function AnatomyView({ activeMuscles, pose }) {
            const [selectedMuscle, setSelectedMuscle] = useState(null);

            return (
                <div className="grid lg:grid-cols-2 gap-6">
                    {/* Muscle Diagram */}
                    <div className="bio-card p-6 sm:p-8 rounded-2xl">
                        <div className="stat-label mb-6">Active Muscle Groups</div>
                        <div className="relative w-full aspect-[3/4] max-w-md mx-auto">
                            <svg viewBox="0 0 300 500" className="w-full h-full">
                                {/* Simplified muscle group visualization */}
                                {Object.entries(MUSCLE_GROUPS).map(([key, muscle]) => {
                                    const isActive = activeMuscles.includes(key);
                                    const positions = {
                                        quadriceps: { x: 150, y: 320, width: 40, height: 80 },
                                        hamstrings: { x: 150, y: 320, width: 35, height: 75 },
                                        glutes: { x: 150, y: 270, width: 50, height: 40 },
                                        core: { x: 150, y: 220, width: 60, height: 60 },
                                        shoulders: { x: 150, y: 140, width: 80, height: 30 },
                                        back: { x: 150, y: 180, width: 55, height: 70 },
                                        calves: { x: 150, y: 410, width: 30, height: 60 },
                                        hip_flexors: { x: 150, y: 280, width: 45, height: 35 }
                                    };
                                    
                                    const pos = positions[key];
                                    
                                    return (
                                        <ellipse
                                            key={key}
                                            cx={pos.x}
                                            cy={pos.y}
                                            rx={pos.width}
                                            ry={pos.height}
                                            className={`muscle-highlight ${isActive ? 'muscle-active' : 'muscle-inactive'}`}
                                            onClick={() => setSelectedMuscle(key)}
                                            style={{ fill: isActive ? muscle.color : 'rgba(255,255,255,0.05)' }}
                                        />
                                    );
                                })}
                            </svg>
                        </div>
                    </div>

                    {/* Muscle Info */}
                    <div className="space-y-4">
                        <div className="bio-card p-6 sm:p-8 rounded-2xl">
                            <div className="stat-label mb-6">Muscle Activation Map</div>
                            <div className="space-y-4">
                                {activeMuscles.map(muscleKey => {
                                    const muscle = MUSCLE_GROUPS[muscleKey];
                                    return (
                                        <div 
                                            key={muscleKey}
                                            className="flex items-center justify-between p-4 rounded-lg"
                                            style={{ 
                                                background: `linear-gradient(90deg, ${muscle.color}22 0%, transparent 100%)`
                                            }}
                                        >
                                            <div className="flex items-center gap-4">
                                                <div 
                                                    className="w-3 h-3 rounded-full"
                                                    style={{ 
                                                        background: muscle.color,
                                                        boxShadow: `0 0 12px ${muscle.color}`
                                                    }}
                                                />
                                                <span className="text-sm">{muscle.name}</span>
                                            </div>
                                            <div className="text-xs uppercase tracking-wider" style={{ color: 'var(--text-whisper)' }}>
                                                Active
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        </div>

                        <div className="bio-card p-6 rounded-2xl">
                            <div className="stat-label mb-4">Biomechanical Focus</div>
                            <p className="text-sm leading-relaxed" style={{ color: 'var(--text-soft)' }}>
                                {pose.name} primarily engages {activeMuscles.length} major muscle groups. 
                                Proper alignment ensures balanced activation and reduces injury risk.
                            </p>
                        </div>
                    </div>
                </div>
            );
        }

        function BiometricsView({ pose, angles, getAlignmentStatus }) {
            const canvasRef = useRef(null);

            useEffect(() => {
                const canvas = canvasRef.current;
                if (!canvas) return;
                
                const ctx = canvas.getContext('2d');
                const width = canvas.width = canvas.offsetWidth * 2;
                const height = canvas.height = canvas.offsetHeight * 2;
                ctx.scale(2, 2);

                // Draw biometric gauges
                pose.checkpoints.forEach((cp, idx) => {
                    const x = (idx % 2) * 200 + 100;
                    const y = Math.floor(idx / 2) * 150 + 100;
                    
                    drawGauge(ctx, x, y, angles[cp.joint] || cp.ideal, cp.ideal, cp.range, getAlignmentStatus(cp.joint));
                });
            }, [angles, pose, getAlignmentStatus]);

            function drawGauge(ctx, x, y, current, ideal, range, status) {
                const radius = 40;
                
                // Background arc
                ctx.beginPath();
                ctx.arc(x, y, radius, 0, Math.PI * 2);
                ctx.strokeStyle = 'rgba(0, 0, 0, 0.05)';
                ctx.lineWidth = 8;
                ctx.stroke();
                
                // Status arc - Zen colors
                const percentage = (current - range[0]) / (range[1] - range[0]);
                const color = status === 'optimal' ? '#84cc16' : status === 'acceptable' ? '#6366f1' : '#ef4444';
                
                ctx.beginPath();
                ctx.arc(x, y, radius, -Math.PI/2, -Math.PI/2 + (Math.PI * 2 * percentage));
                ctx.strokeStyle = color;
                ctx.lineWidth = 8;
                ctx.stroke();
                
                // Center text
                ctx.fillStyle = color;
                ctx.font = '20px JetBrains Mono';
                ctx.textAlign = 'center';
                ctx.fillText(`${current}°`, x, y + 7);
            }

            return (
                <div className="bio-card p-6 sm:p-8 rounded-2xl">
                    <div className="stat-label mb-6">Real-time Biometric Gauges</div>
                    <canvas 
                        ref={canvasRef}
                        className="w-full h-[400px] sm:h-[600px]"
                    />
                </div>
            );
        }

        ReactDOM.createRoot(document.getElementById('root')).render(<AlignmentLab />);

        // Mobile optimizations
        function setVH() {
            let vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--vh', `${vh}px`);
        }
        setVH();
        window.addEventListener('resize', setVH);
        window.addEventListener('orientationchange', setVH);
    </script>
</body>
</html>
