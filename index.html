<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Symphony Meditation Timer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;1,400&family=Inter:wght@200;300;400;500&display=swap" rel="stylesheet">
    <style>
        :root { --ink: #1a1a1a; --slate: #64748b; }
        body { font-family: 'Inter', sans-serif; background: #f8fafc; color: var(--ink); margin: 0; min-height: 100vh; display: flex; align-items: center; justify-content: center; overflow-x: hidden; }
        .font-serif { font-family: 'Cormorant Garamond', serif; }
        
        .timer-container { width: 100%; max-width: 500px; padding: 2rem; text-align: center; animation: fadeIn 0.8s ease-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .choice-btn { 
            padding: 6px 12px; margin: 3px; border: 1px solid #e2e8f0; border-radius: 99px; 
            background: white; font-size: 10px; cursor: pointer; transition: all 0.2s; text-transform: uppercase; letter-spacing: 0.05em;
        }
        .choice-btn.active { background: var(--ink); color: white; border-color: var(--ink); }

        .breath-circle { 
            width: 220px; height: 220px; border-radius: 50%; background: white; 
            margin: 3rem auto; display: flex; flex-direction: column; align-items: center; justify-content: center;
            cursor: pointer; transition: transform 4s ease-in-out; 
            box-shadow: 0 10px 40px rgba(0,0,0,0.03), inset 0 0 20px rgba(0,0,0,0.01);
            border: 1px solid rgba(0,0,0,0.05);
        }
        .breathing { transform: scale(1.3); }

        .glossary-card {
            background: white; border-radius: 24px; padding: 1.5rem; margin-top: 2rem;
            text-align: left; border: 1px solid #f1f5f9; box-shadow: 0 4px 20px rgba(0,0,0,0.02);
        }

        select { border: none; background: transparent; font-size: 12px; font-weight: 500; cursor: pointer; color: var(--slate); text-align: center; width: 100%; }
        select:focus { outline: none; }
    </style>
</head>
<body>

    <div class="timer-container">
        <h1 class="font-serif italic text-4xl mb-2">symphony</h1>
        <p id="pathLabel" class="text-[9px] uppercase tracking-[0.3em] text-slate-400 mb-8">choose your path</p>

        <div class="flex flex-wrap justify-center mb-8" id="pathGrid"></div>

        <div class="grid grid-cols-2 gap-4 mb-8">
            <div class="bg-white p-3 rounded-2xl border border-slate-100">
                <p class="text-[8px] uppercase tracking-widest text-slate-400 mb-1">Technique</p>
                <select id="techSelect" onchange="updateTechnique()"></select>
            </div>
            <div class="bg-white p-3 rounded-2xl border border-slate-100">
                <p class="text-[8px] uppercase tracking-widest text-slate-400 mb-1">Variation</p>
                <select id="varSelect" onchange="updateVariation()"></select>
            </div>
        </div>

        <div class="breath-circle" id="circle" onclick="toggleTimer()">
            <div id="status" class="text-[9px] uppercase tracking-[0.2em] font-bold text-slate-400">begin</div>
            <div id="timerDisplay" class="text-2xl font-light mt-1">10:00</div>
        </div>

        <div class="glossary-card" id="glossary">
            <h3 id="gTitle" class="font-serif italic text-xl mb-1">Technique Guide</h3>
            <p id="gBen" class="text-[9px] uppercase tracking-widest text-emerald-600 font-bold mb-3"></p>
            <p id="gText" class="text-xs leading-relaxed text-slate-500"></p>
        </div>
    </div>

    <script>
        // DATA: COMBINED BREATHWORK & MEDITATION LIBRARIES
        const LIBRARY = {
            mindfulness: [
                { id: 'ba', name: 'Breath Awareness', ben: 'Focus • Calm', text: 'Observe the natural flow of breath. When the mind wanders, return gently.', vars: [{id:'v1', name:'Counting 1-10', text:'Count each exhale up to 10.'}]},
                { id: 'bs', name: 'Body Scan', ben: 'Release • Presence', text: 'Move attention from toes to head, noting sensations without judgment.', vars: [{id:'v2', name:'Quick Scan', text:'A 5-minute full body reset.'}]}
            ],
            somatic: [
                { id: 'vn', name: 'Vagus Nerve Reset', ben: 'Anxiety Relief', text: 'Gently look to the far right without turning head until you yawn or sigh.', vars: []},
                { id: 'an', name: 'Alternate Nostril', ben: 'Balance', text: 'Close right, inhale left. Close left, exhale right.', vars: []}
            ],
            zen: [
                { id: 'zz', name: 'Zazen', ben: 'Clarity', text: 'Just sitting. Eyes half-open, gaze down. No goal, just presence.', vars: [{id:'k', name:'Koan', text:'Meditation on a paradox.'}]}
            ],
            breathwork: [
                { id: 'box', name: 'Box Breathing', ben: 'Performance • Focus', text: 'Inhale 4, Hold 4, Exhale 4, Hold 4.', vars: [{id:'478', name:'4-7-8 Sleep', text:'Inhale 4, Hold 7, Exhale 8.'}]}
            ],
            heart: [
                { id: 'lk', name: 'Loving-Kindness', ben: 'Compassion', text: 'Recite: May I be happy, May I be well, May I be safe.', vars: []}
            ]
        };

        const paths = ['mindfulness', 'somatic', 'zen', 'breathwork', 'heart', 'insight', 'movement', 'visualization', 'concentration', 'healing', 'balancing', 'energizing', 'cooling', 'foundational', 'advanced'];
        let active = false;
        let currentPath = 'mindfulness';

        // INITIALIZE
        function init() {
            const grid = document.getElementById('pathGrid');
            paths.forEach(p => {
                const btn = document.createElement('button');
                btn.className = `choice-btn ${p === currentPath ? 'active' : ''}`;
                btn.id = `btn-${p}`;
                btn.innerText = p;
                btn.onclick = () => selectPath(p);
                grid.appendChild(btn);
            });
            selectPath('mindfulness');
        }

        function selectPath(p) {
            currentPath = p;
            document.querySelectorAll('.choice-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(`btn-${p}`).classList.add('active');
            
            const techs = LIBRARY[p] || [{name: 'Coming Soon', text: 'Explore other branches.', vars:[]}];
            const ts = document.getElementById('techSelect');
            ts.innerHTML = techs.map(t => `<option value="${t.id}">${t.name}</option>`).join('');
            updateTechnique();
        }

        function updateTechnique() {
            const techs = LIBRARY[currentPath] || [];
            const t = techs.find(i => i.id === document.getElementById('techSelect').value) || techs[0];
            
            const vs = document.getElementById('varSelect');
            vs.innerHTML = `<option value="base">Standard</option>` + (t.vars ? t.vars.map(v => `<option value="${v.id}">${v.name}</option>`).join('') : '');
            
            showGlossary(t.name, t.ben, t.text);
        }

        function updateVariation() {
            const techs = LIBRARY[currentPath] || [];
            const t = techs.find(i => i.id === document.getElementById('techSelect').value) || techs[0];
            const vId = document.getElementById('varSelect').value;
            
            if(vId === 'base') {
                showGlossary(t.name, t.ben, t.text);
            } else {
                const v = t.vars.find(i => i.id === vId);
                showGlossary(v.name, t.ben, v.text);
            }
        }

        function showGlossary(title, ben, text) {
            document.getElementById('gTitle').innerText = title;
            document.getElementById('gBen').innerText = ben || '';
            document.getElementById('gText').innerText = text;
        }

        function toggleTimer() {
            active = !active;
            document.getElementById('circle').classList.toggle('breathing', active);
            document.getElementById('status').innerText = active ? "Breathing" : "Paused";
            document.getElementById('status').classList.toggle('text-emerald-500', active);
        }

        init();
    </script>
</body>
</html>
